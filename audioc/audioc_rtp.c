#include "audioc_rtp.h"

#include <stdio.h>


//Does no endianness conversion
void printRTPHeader(rtp_hdr_t* rtp) {
    printf("RTP Header: \n");
    printf("\tVersion: %d\n", rtp->version);
    printf("\tPadding: %d\n", rtp->p);
    printf("\tExtension: %d\n", rtp->x);
    printf("\tCSRC Count: %d\n", rtp->cc);
    printf("\tMarker: %d\n", rtp->m);
    const char* ptStr = payloadToStr(rtp->pt);
    printf("\tPayload Type: %d (%s)\n", rtp->pt, ptStr);
    printf("\tSequence Num: %d\n", rtp->seq);
    printf("\tTimestamp: %d\n", rtp->ts);
    printf("\tSSRC: %.X\n", rtp->ssrc);
}

void ntohRTP(rtp_hdr_t* header) {
    header->ssrc = ntohl(header->ssrc);
    header->seq = ntohs(header->seq);
    header->ts = ntohl(header->ts);
}

void htonRTP(rtp_hdr_t* header) {
    header->ssrc = htonl(header->ssrc);
    header->seq = htons(header->seq);
    header->ts = htonl(header->ts);
}

u8 silenceMU8[256] = {
    0xFA, 0xFA, 0xFB, 0xFC, 0xFD, 0xFD, 0xFD, 0xFC, 0xFC, 0xFE, 
    0xFE, 0xFE, 0xFE, 0x7E, 0x7E, 0x7C, 0x7C, 0x7C, 0x7A, 0x79, 
    0x77, 0x79, 0x78, 0x76, 0x77, 0x79, 0x7C, 0x79, 0x7B, 0x7D, 
    0x7D, 0x7D, 0x7B, 0x7C, 0x7C, 0x7D, 0x7F, 0xFF, 0xFE, 0xFD, 
    0xFB, 0xFB, 0xFB, 0xFB, 0xFA, 0xFA, 0xFB, 0xFA, 0xFB, 0xFA, 
    0xF9, 0xFB, 0xFA, 0xFA, 0xFB, 0xF9, 0xF9, 0xFA, 0xFB, 0xFE, 
    0x7E, 0x7C, 0x7C, 0x7C, 0x7A, 0x7A, 0x7A, 0x79, 0x7A, 0x7D, 
    0x7C, 0x7B, 0x7C, 0x7C, 0x7B, 0x7C, 0x7C, 0x7D, 0x7D, 0x7D, 
    0x7E, 0xFF, 0xFE, 0xFC, 0xFD, 0xFD, 0xFC, 0xFB, 0xFB, 0xFA, 
    0xFA, 0xFA, 0xFC, 0xFD, 0xFC, 0xFB, 0xFB, 0xFC, 0xFE, 0x7E, 
    0x7F, 0x7D, 0x7C, 0x7B, 0x7B, 0x7D, 0x7E, 0x7C, 0x7D, 0x7E, 
    0x7F, 0x7F, 0x7F, 0xFE, 0x7D, 0x7C, 0x7A, 0x7B, 0x7A, 0x7A, 
    0x79, 0x7A, 0x7B, 0x7B, 0x7C, 0x7D, 0x7E, 0x7E, 0xFE, 0x7E, 
    0xFD, 0xFC, 0xFD, 0xFE, 0xFC, 0xF9, 0xF9, 0xFA, 0xF8, 0xF8, 
    0xF8, 0xF6, 0xF9, 0xF7, 0xF9, 0xFB, 0xFC, 0x7F, 0x7E, 0xFF, 
    0x7F, 0x7D, 0x7D, 0x7E, 0x7D, 0x7E, 0x7E, 0x7F, 0x7D, 0x7D, 
    0x7D, 0x7C, 0x7C, 0x79, 0x7D, 0x7C, 0x7D, 0x7E, 0xFE, 0xFD, 
    0x7E, 0x7B, 0x78, 0x77, 0x78, 0x78, 0x7D, 0x7E, 0x7F, 0xFC, 
    0xFA, 0xFA, 0xF8, 0xF8, 0xFF, 0x7D, 0x79, 0x76, 0x75, 0x7B, 
    0x7E, 0xFB, 0xF8, 0xF8, 0xFA, 0xFA, 0xFC, 0xFE, 0x79, 0x7C, 
    0x76, 0x76, 0x7E, 0x79, 0xFD, 0xFE, 0xFF, 0xFD, 0xF7, 0xF6, 
    0xFC, 0xFC, 0x7D, 0x7D, 0xFF, 0xFE, 0xFA, 0xF4, 0xFD, 0xFC, 
    0x7C, 0x74, 0x7D, 0xFA, 0xFC, 0xF7, 0xF7, 0x7D, 0xFA, 0xF9, 
    0xFC, 0x72, 0x72, 0x79, 0x7A, 0xFA, 0xFA, 0xFA, 0xFA, 0xFF, 
    0x7B, 0xFC, 0xFD, 0x79, 0x6E, 0x6C, 0x6E, 0xFE, 0xFE, 0xF2, 
    0xF4, 0xFB, 0xFD, 0xFB, 0xEF, 0xFB, 
};

u8 silenceL16BE[256] = {};
